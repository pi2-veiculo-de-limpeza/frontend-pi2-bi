<link href="http://maxcdn.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
<link href="../../assets/stylesheets/dashboard_screen.css" rel="stylesheet">
<script src="http://maxcdn.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.min.js"></script>
<script src="http://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<script  type="text/javascript" src="../../assets/javascript/d3.min.js"></script>
<!------ Include the above in your HEAD tag ---------->

<body>
  
  <!-- Navigation-->
  <nav class="navbar navbar-expand-lg navbar-dark fixed-top" id="mainNav">
     <button class="navbar-toggler navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button>

    <div class="collapse navbar-collapse" id="navbarResponsive">
      <%
        @vehicle = @etl_missions_vehicles["vehicle"]
        @missions = @etl_missions_vehicles["missao"]
        @area_por_missao = @etl_missions_vehicles["area_por_missao"]
        @lixo_por_missao = @etl_missions_vehicles["lixo_por_missao"]
      %>
      <ul class="navbar-nav navbar-sidenav">

          <a class="nav-link navlogo text-center" href="index.php">
            <img src="https://image.flaticon.com/icons/svg/1260/1260347.svg">
          </a>

        <li class="nav-item">
          <a class="nav-link sidesecnd" href="">
            <span class="textside">  <strong>Nome do veiculo</strong></span><br>
            <text-center><%= @vehicle.first[1][0] %></text-center>
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link sidesthrd" href="">
            <span class="textside">  <strong>Velocidade</strong></span><br>
            <text-center><%= @vehicle.first[1][1] %></text-center>
          </a>
        </li>
      </ul>
      
      <ul class="navbar-nav2 ml-auto">
        <li class="dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown">Bem vindo</a>
            <ul class="dropdown-menu">
                <li class="resflset"><a href="profile.php"><i class="fa fa-fw fa-cog"></i> Editar perfil</a></li>
                <li class="divider"></li>
                <li class="resflset"><a href="#"><i class="fa fa-fw fa-power-off"></i> Sair</a></li>
            </ul>
        </li>
      </ul>
      
    </div>
  </nav>

  <div class="content-wrapper">
    <div class="container-fluid">
      <div class="row">

      <!-- Icon Cards-->
        <div class="col-lg-4 col-md-4 col-sm-6 col-12 mb-2 mt-4">
            <div class="inforide">
              <div class="row">
                <div class="col-lg-3 col-md-4 col-sm-4 col-4 rideone">
                    <img src="https://cdn.iconscout.com/icon/premium/png-256-thumb/garbage-truck-549997.png">
                </div>
                <div class="col-lg-9 col-md-8 col-sm-8 col-8 fontsty">
                    <h4>Veiculo</h4>
                    <h2><%= @vehicle.first[1][0] %></h2>
                </div>
              </div>
            </div>
        </div>

        <div class="col-lg-4 col-md-4 col-sm-6 col-12 mb-2 mt-4">
            <div class="inforide">
              <div class="row">
                <div class="col-lg-3 col-md-4 col-sm-4 col-4 ridetwo">
                    <img src="http://sindiclubespr.com.br/wp-content/uploads/2016/12/mission-icon.png">
                </div>
                <div class="col-lg-9 col-md-8 col-sm-8 col-8 fontsty">
                    <h4>Missoes</h4>
                    <h2><%= @etl_missions_vehicles["total"] %></h2>
                </div>
              </div>
            </div>
        </div>

        <div class="col-lg-4 col-md-4 col-sm-6 col-12 mb-2 mt-4">
            <div class="inforide">
              <div class="row">
                <div class="col-lg-3 col-md-4 col-sm-4 col-4 ridethree">
                    <img src="https://cdn3.iconfinder.com/data/icons/tools-solid-icons-vol-2/72/59-512.png">
                </div>
                <div class="col-lg-9 col-md-8 col-sm-8 col-8 fontsty">
                    <h4>Lixo coletado</h4>
                    <h2><%= @etl_missions_vehicles["total_lixo_coletado"] %></h2>
                </div>
              </div>
            </div>
        </div>

        <div class="col-lg-4 col-md-4 col-sm-6 col-12 mb-2 mt-4">
            <div class="inforide">
              <div class="row">
                <div class="col-lg-3 col-md-4 col-sm-4 col-4 ridethree">
                    <img src="https://cdn3.iconfinder.com/data/icons/map-and-geo-location/30/map-pin-area-multiple-512.png">
                </div>
                <div class="col-lg-9 col-md-8 col-sm-8 col-8 fontsty">
                    <h4>Area percorrida</h4>
                    <h2><%= @etl_missions_vehicles["total_area_missao"] %></h2>
                </div>
              </div>
            </div>
        </div>

    </div>
  </div>
</div>
<script>

var disciplinas = [
  {key: "Missão 1",               value: 78},
  {key: "Missão 2",            value: 71},
  {key: "Missão 3",       value: 67},
  {key: "Missão 4",          value: 93},
  {key: "Sistemas Operacionais I",      value: 59},
  {key: "Física Experimental",      value: 43},
  {key: "Engenharia de Software",     value: 88},
  {key: "Estrutura de Dados",       value: 36},
  {key: "Algoritmos I",             value: 91},
  {key: "Algoritmos II",          value: 74},
  {key: "Programação Java",         value: 67},
  {key: "Programação Python",       value: 75}
];

var w = 1000;
var h = 450;

var margin = {
  top: 20,
  bottom: 100,
  left: 300,
  right: 20
};

var width = w - margin.left - margin.right;
var height = h - margin.top - margin.bottom;

var x = d3.scale.ordinal()
    .domain(disciplinas.map(function(entry){
      return entry.key;
    }))
    .rangeBands([0, width]);

var y = d3.scale.linear()
    .domain([0, d3.max(disciplinas, function(d){
      return d.value;
    })])
    .range([height, 0]);

var ordinalColorScale = d3.scale.category20();

var xAxis = d3.svg.axis()
      .scale(x)
      .orient("bottom");

var yAxis = d3.svg.axis()
      .scale(y)
      .orient("left");

var svg = d3.select("body").append("svg")
      .attr("id", "chart")
      .attr("width", w)
      .attr("height", h);

var chart = svg.append("g")
      .classed("display", true)
      .attr("transform", "translate(" + margin.left + "," + margin.top + ")");

  function plot(params){
    this.selectAll(".bar")
      .data(params.data)
      .enter()
        .append("rect")
        .classed("bar", true)
        .attr("x", function(d,i){
          return x(d.key);
        })
        .attr("y", function(d,i){
          return y(d.value);
        })
        .attr("height", function(d,i){
          return height - y(d.value);
        })
        .attr("width", function(d){
          return x.rangeBand();
        })
        .style("fill", function(d,i){
          return ordinalColorScale(i);
        });
    this.selectAll(".bar-label")
      .data(params.data)
      .enter()
        .append("text")
        .classed("bar-label", true)
        .attr("x", function(d,i){
          return x(d.key) + (x.rangeBand()/2)
        })
        .attr("dx", 0)
        .attr("y", function(d,i){
          return y(d.value);
        })
        .attr("dy", -6)
        .text(function(d){
          return d.value;
        })
    this.append("g")
      .classed("x axis", true)
      .attr("transform", "translate(" + 0 + "," + height + ")")
      .call(xAxis);

    this.append("g")
      .classed("y axis", true)
      .attr("transform", "translate(0,0)")
      .call(yAxis);
  }

  plot.call(chart, {data: disciplinas});
</script> 

</body>